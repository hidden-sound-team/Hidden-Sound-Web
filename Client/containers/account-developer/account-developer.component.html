<div class="content-main">
    <div class="content-header">
        <div class="header-inner">
            <h2>Developer Apps</h2>
        </div>
    </div>
    <h4>
        Here are a list of applications associated with your account. These applications will be able to call our API
        and will allow you to integrate our service into your site!
    </h4>
    <div class="content-inner content-inner-end">
        <!--class="form-horizontal" (ngSubmit)="submit" #developerForm="ngForm"-->
        <div  >
            <div > <!--class="form-actions"-->
                <table>
                    <thead>
                        <th colspan="2">NAME</th>
                        <!--<th>REDIRECT URI</th>-->
                        <th>CLIENT ID</th>   
                        <th>ACTIONS</th>                     
                    </thead>                    
                    <tbody>
                        <tr *ngFor="let app of apps">                            
                            <td colspan="2">{{ app.name }}</td>
                            <!--<td>{{ app.redirectUri }}</td>-->
                            <td>{{ app.clientId }}</td>  
                            <td>
                                <button (click)="startEdit(app)" class="btn btn-small btn-warning">
                                    <i class="fa fa-pencil" aria-hidden="true" style="font-size: 1.3em;"></i>
                                </button>                            
                                <button (click)="deleteApp(app.clientId)" class="btn btn-small btn-danger">
                                    <i class="fa fa-trash" aria-hidden="true" style="font-size: 1.3em;"></i>
                                </button>
                            </td>                          
                        </tr>                   
                    </tbody>                                                        
                </table>               
            </div> <br>
                <a href="{{devDocUrl}}" target="_blank" class="btn btn-purple float-right">API Documentation</a>  
                <button class="btn btn-purple float-right" (click)="startAdd()">
                    Add App
                </button> 
        </div>    
    </div>
</div>



<app-modal>
    <div *ngIf="isAdding" class="app-modal-header">
        <h3>Add a New App</h3>
    </div>
    <div *ngIf="isAdding" class="app-modal-body">
        <h4 style="text-align: justify">
            Provide us with your application name and a callback URL. We'll register your application with our service
            and give you a client ID along with a client secret, which you will only be shown once.
        </h4>
        <br>
        <form>
            <div class="form-group">
                <label>Application Name</label>
                <input class="form-control" [(ngModel)]="inputName" name="appName" placeholder="App Name">
                <span>Your application name. This is used in user-facing authorization screens.</span>
            </div>
            <div class="form-group">
                <label>Redirect URI</label>
                <input class="form-control" [(ngModel)]="inputRedirect" name="uri" placeholder="Redirect URI">
                <span>Where should we return after successfully authenticating?</span>
            </div>
            <div class="form-group">
                <button (click)="createApp(inputName, inputRedirect);"  class="btn btn-purple btn-block">Complete</button>
            </div>
        </form>
        <div *ngIf="showNotification" class="alert alert-success">
            Your app has been created successfully! Here is your client secret. Please record it and keep it somewhere safe.
            You will not be shown this client secret again!
            <strong>{{ newApp.clientSecret }}</strong>
        </div>
    </div>

    <div *ngIf="!isAdding" class="app-modal-header">
        <h3>Edit Your App</h3>
    </div>
    <div *ngIf="!isAdding" class="app-modal-body">
        <form>
            <div class="form-group">
                <label>Application Name</label>
                <input class="form-control" [(ngModel)]="inputName" name="appName" placeholder="App Name">
                <span>Your application name. This is used in user-facing authorization screens.</span>
            </div>
            <div class="form-group">
                <label>Redirect URI</label>
                <input class="form-control" [(ngModel)]="inputRedirect" name="uri" placeholder="Redirect URI">
                <span>Where should we return after successfully authenticating?</span>
            </div>
            <div class="form-group">
                <button (click)="finishEdit(inputName, inputRedirect);"  class="btn btn-purple btn-block">Complete</button>
            </div>
        </form>
        <div *ngIf="showNotification" class="alert alert-success">
            You have successfully edited your application!
        </div>
    </div>


    <div class="app-modal-footer">
    </div>
</app-modal>


<!--<p>Message: {{ message }}</p>-->
<!--<p>Name: {{ inputName }}</p>
<p>Redirect URI: {{ inputRedirect }}</p>S
<p>Delete ID: {{ deleteID }}</p>
<p> App list: {{ applications }}</p>-->